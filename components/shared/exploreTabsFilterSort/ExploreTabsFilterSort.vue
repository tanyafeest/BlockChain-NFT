<template>
  <div>
    <div v-if="route.query.search" class="block">
      {{ $t('general.searchResultsText') }}
      <span class="text__stroked is-size-3">{{ route.query.search }}</span>
    </div>

    <div class="mb-5 explore-tabs field has-addons is-flex" data-cy="tabs">
      <p class="control">
        <NeoButton
          class="explore-tabs-button"
          :active="selectedTab === TabType.COLLECTION"
          @click.native="updateTab(TabType.COLLECTION)">
          <span> {{ $t('collections') }}</span>
          <img
            v-if="selectedTab === TabType.COLLECTION"
            src="/checkmark.svg"
            class="check-icon" />
        </NeoButton>
      </p>
      <p class="control">
        <NeoButton
          class="explore-tabs-button"
          :active="selectedTab === TabType.ITEMS"
          @click.native="updateTab(TabType.ITEMS)">
          <span> {{ $t('items') }}</span>
          <img
            v-if="selectedTab === TabType.ITEMS"
            src="/checkmark.svg"
            class="check-icon" />
        </NeoButton>
      </p>
    </div>
  </div>
</template>

<script setup lang="ts" scoped>
import { NeoButton } from '@kodadot1/brick'

enum TabType {
  COLLECTION = 'collectibles',
  ITEMS = 'items',
}

const route = useRoute()
const router = useRouter()

const selectedTab = computed(() => route?.name?.split('-')[2])

const updateTab = (val) => {
  route.query.page = ''
  let queryOptions: {
    page: string
    search?: string | (string | null)[]
  } = {
    page: '1',
  }
  if (route.query.search) {
    queryOptions.search = route.query.search
  }
  router.replace({
    path: val,
    query: queryOptions,
  })
}
</script>

<style lang="scss">
@import '@/styles/abstracts/variables';

.explore-tabs {
  &-button {
    width: 15rem;
  }

  @include mobile {
    .control,
    &-button {
      width: 100%;
    }
  }
}

.dark-mode .explore-tabs-button.active img {
  filter: brightness(0%);
}
</style>
