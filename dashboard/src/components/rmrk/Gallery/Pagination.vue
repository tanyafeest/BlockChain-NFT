<template>
  <b-pagination
    :total="total"
    :current.sync="current"
    :range-before="2"
    :range-after="2"
    :simple="simple"
    order="is-centered"
    aria-next-label="Next page"
    aria-previous-label="Previous page"
    aria-page-label="Page"
    aria-current-label="Current page"
  >
  </b-pagination>
</template>

<script lang="ts" >
import { Component, Prop, Vue, Watch } from 'vue-property-decorator';
import { exist } from './Search/exist';
import { Debounce } from 'vue-debounce-decorator';

@Component({})
export default class Pagination extends Vue {
  @Prop() value!: number;
  @Prop() public total!: number;
  @Prop(Boolean) simple!: boolean;

    public mounted() {
    exist(this.$route.query.page, (val) => { this.current = Number(val) });
    // console.log('query', this.$route.query)
    // if (
    //   this.$route.query.search &&
    //   typeof this.$route.query.search === 'string'
    // ) {
    //   this.updateSearch(this.$route.query.search);
    // }
  }


  get current() {
    return this.value
  }

  set current(value: number) {
    this.$emit('input', value)
    this.replaceUrl(String(value))
  }


  @Debounce(200)
  replaceUrl(value: string, key = 'page') {
    this.$router
      .replace({
        name: 'nft',
        query: { ...this.$route.query, [key]: value }
      })
      .catch(console.warn /*Navigation Duplicate err fix later */);
  }



}
</script>
