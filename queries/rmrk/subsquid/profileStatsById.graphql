# import "../../fragments/event.graphql"
# import "../../fragments/nftSubsquid.graphql"
# import "../../fragments/nftDetails.graphql"

query profileStatsById($id: String!) {
  listed : events(where: {  
          caller_eq: $id , 
          interaction_eq: LIST,  
          nft: {
            currentOwner_eq: $id,
            name_not_contains: "%Kanaria%",
            burned_eq: false,
          },
      }  
    ) {
    ...event
    nft {
      id
      metadata
      issuer
      currentOwner
      blockNumber
      burned
      updatedAt
    }
  }
  collected : nftEntities(where: { currentOwner_eq:$id, burned_eq: false}  ) {
    ...nftSubsquid
    ...nftDetails
    events {
      id
      blockNumber
      timestamp
      caller
      currentOwner
      meta
      interaction
      nft {
        id
        metadata
        issuer
        currentOwner
        blockNumber
        burned
        updatedAt
      }
    }
  }
  sold : events(where: { 
        caller_eq: $id ,           
        interaction_eq: SEND,
        nft: { 
          name_not_contains: "%Kanaria%", 
          burned_eq: false
        }
      }  
    ) {
    ...event
    nft {
        ...nftSubsquid
        ...nftDetails
       events {
          id
          blockNumber
          timestamp
          caller
          currentOwner
          meta
          interaction
      }
    }
  }

  invested : events(where: {  caller_eq: $id ,  interaction_eq: BUY,
          nft: { 
            name_not_contains: "%Kanaria%", 
            burned_eq: false 
          }
        }  
    ) {
    ...event
    nft {
      ...nftSubsquid
      ...nftDetails

    }
  }
  
}
